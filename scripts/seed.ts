import { PrismaClient } from '@prisma/client';
import { hashPassword } from '../src/utils/auth';

const prisma = new PrismaClient();

async function main() {
  console.log('๐ฑ Starting database seeding...');

  // Create users with different roles
  const hashedPassword = await hashPassword('admin123');
  
  const superAdmin = await prisma.user.upsert({
    where: { email: 'superadmin@example.com' },
    update: {},
    create: {
      email: 'superadmin@example.com',
      password: hashedPassword,
      name: 'ูุฏูุฑ ุงููุธุงู ุงูุนุงู',
      role: 'SUPER_ADMIN'
    }
  });

  const admin = await prisma.user.upsert({
    where: { email: 'admin@example.com' },
    update: {},
    create: {
      email: 'admin@example.com',
      password: hashedPassword,
      name: 'ูุฏูุฑ ุงููุธุงู',
      role: 'ADMIN'
    }
  });

  const editor = await prisma.user.upsert({
    where: { email: 'editor@example.com' },
    update: {},
    create: {
      email: 'editor@example.com',
      password: hashedPassword,
      name: 'ูุญุฑุฑ ุงููุญุชูู',
      role: 'EDITOR'
    }
  });

  console.log('โ Users created:', superAdmin.email, admin.email, editor.email);

  // Create categories
  const categories = [
    {
      name: 'ุงูููุงุชู ุงูุฐููุฉ',
      slug: 'smartphones',
      description: 'ุฃุญุฏุซ ุงูููุงุชู ุงูุฐููุฉ ูู ุฃูุถู ุงูุนูุงูุงุช ุงูุชุฌุงุฑูุฉ',
      image: 'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&h=300&fit=crop',
      sortOrder: 1
    },
    {
      name: 'ุงูุฅูุณุณูุงุฑุงุช',
      slug: 'accessories',
      description: 'ุฅูุณุณูุงุฑุงุช ูุชููุนุฉ ููุฃุฌูุฒุฉ ุงูุฅููุชุฑูููุฉ',
      image: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop',
      sortOrder: 2
    },
    {
      name: 'ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ',
      slug: 'laptops',
      description: 'ุฃุฌูุฒุฉ ูุงุจุชูุจ ูุฃุฌูุฒุฉ ูุญูููุฉ ููุฃุนูุงู ูุงูุงุณุชุฎุฏุงู ุงูุดุฎุตู',
      image: 'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=300&fit=crop',
      sortOrder: 3
    },
    {
      name: 'ุงููุงููุฑุงุช',
      slug: 'cameras',
      description: 'ูุงููุฑุงุช ุฑูููุฉ ุงุญุชุฑุงููุฉ ูุดุจู ุงุญุชุฑุงููุฉ',
      image: 'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=400&h=300&fit=crop',
      sortOrder: 4
    }
  ];

  for (const categoryData of categories) {
    const category = await prisma.category.upsert({
      where: { slug: categoryData.slug },
      update: {},
      create: categoryData
    });
    console.log('โ Category created:', category.name);
  }

  // Get categories for product assignment
  const smartphonesCategory = await prisma.category.findUnique({ where: { slug: 'smartphones' } });
  const accessoriesCategory = await prisma.category.findUnique({ where: { slug: 'accessories' } });
  const laptopsCategory = await prisma.category.findUnique({ where: { slug: 'laptops' } });
  const camerasCategory = await prisma.category.findUnique({ where: { slug: 'cameras' } });

  // Create sample products with categories
  const sampleProducts = [
    {
      name: 'ูุงุชู ุฐูู ูุชุทูุฑ',
      slug: 'smartphone-advanced',
      description: 'ูุงุชู ุฐูู ูุชุทูุฑ ูุน ุฃุญุฏุซ ุงูุชูููุงุช ูุงููุงููุฑุง ุงููุชุทูุฑุฉ',
      price: 1299,
      image: 'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product1',
      categoryId: smartphonesCategory?.id,
      createdById: admin.id,
      features: [
        'ุดุงุดุฉ ุนุงููุฉ ุงูุฏูุฉ 6.7 ุจูุตุฉ',
        'ูุงููุฑุง ุฎูููุฉ ุซูุงุซูุฉ 48 ููุฌุงุจูุณู',
        'ุจุทุงุฑูุฉ ุชุฏูู ุทูุงู ุงูููู',
        'ูุนุงูุฌ ุณุฑูุน ูุญุฏูุซ',
        'ุฐุงูุฑุฉ ุชุฎุฒูู 128 ุฌูุฌุงุจุงูุช',
        'ุฏุนู ุดุจูุงุช 5G',
        'ุญูุงูุฉ ุถุฏ ุงููุงุก ูุงูุบุจุงุฑ',
        'ุดุญู ูุงุณููู ุณุฑูุน'
      ]
    },
    {
      name: 'ุณูุงุนุงุช ูุงุณูููุฉ ุนุงููุฉ ุงูุฌูุฏุฉ',
      slug: 'wireless-headphones',
      description: 'ุณูุงุนุงุช ูุงุณูููุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ูุน ุฅูุบุงุก ุถูุถุงุก ูุชูุฏู',
      price: 299,
      image: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product2',
      categoryId: accessoriesCategory?.id,
      createdById: editor.id,
      features: [
        'ุฌูุฏุฉ ุตูุช ุงุณุชุซูุงุฆูุฉ',
        'ุฅูุบุงุก ุถูุถุงุก ูุดุท',
        'ุจุทุงุฑูุฉ ุชุฏูู 30 ุณุงุนุฉ',
        'ุดุญู ุณุฑูุน ุฎูุงู 10 ุฏูุงุฆู',
        'ููุงููุฉ ูููุงุก ูุงูุนุฑู',
        'ุชุญูู ุจุงูููุณ',
        'ุงุชุตุงู ุจููุชูุซ 5.0',
        'ุญููุจุฉ ุดุญู ูุญูููุฉ'
      ]
    },
    {
      name: 'ุณุงุนุฉ ุฐููุฉ ุฑูุงุถูุฉ',
      slug: 'smart-watch-sport',
      description: 'ุณุงุนุฉ ุฐููุฉ ุฑูุงุถูุฉ ูุน ุชุชุจุน ุงููุดุงุท ุงูุจุฏูู',
      price: 599,
      image: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product3',
      categoryId: accessoriesCategory?.id,
      createdById: editor.id,
      features: [
        'ูุฑุงูุจุฉ ูุนุฏู ุถุฑุจุงุช ุงูููุจ',
        'ุชุชุจุน ุงููุดุงุท ุงูุจุฏูู',
        'ุดุงุดุฉ OLED ููููุฉ',
        'ููุงููุฉ ูููุงุก ุญุชู 50 ูุชุฑ',
        'ุจุทุงุฑูุฉ ุชุฏูู 7 ุฃูุงู',
        'ุฅุดุนุงุฑุงุช ุงููุงุชู',
        'ุชุทุจููุงุช ุฑูุงุถูุฉ ูุชุนุฏุฏุฉ',
        'ุดุญู ูุงุณููู'
      ]
    },
    {
      name: 'ูุงุจุชูุจ ููุฃุนูุงู',
      slug: 'business-laptop',
      description: 'ูุงุจุชูุจ ุงุญุชุฑุงูู ููุฃุนูุงู ูุน ุฃุฏุงุก ุนุงูู',
      price: 2499,
      image: 'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product4',
      categoryId: laptopsCategory?.id,
      createdById: admin.id,
      features: [
        'ูุนุงูุฌ Intel Core i7 ุงูุฌูู 12',
        'ุฐุงูุฑุฉ RAM 16 ุฌูุฌุงุจุงูุช',
        'ูุฑุต ุตูุจ SSD 512 ุฌูุฌุงุจุงูุช',
        'ุดุงุดุฉ 15.6 ุจูุตุฉ ุนุงููุฉ ุงูุฏูุฉ',
        'ุจุทุงุฑูุฉ ุชุฏูู 8 ุณุงุนุงุช',
        'ูุธุงู ุชุดุบูู Windows 11',
        'ููุงูุฐ USB ูุชุนุฏุฏุฉ',
        'ุงุชุตุงู WiFi 6'
      ]
    },
    {
      name: 'ูุงููุฑุง ุฑูููุฉ ุงุญุชุฑุงููุฉ',
      slug: 'professional-camera',
      description: 'ูุงููุฑุง ุฑูููุฉ ุงุญุชุฑุงููุฉ ููุชุตููุฑ ุงูููุชูุบุฑุงูู',
      price: 899,
      image: 'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product5',
      categoryId: camerasCategory?.id,
      createdById: editor.id,
      features: [
        'ุฏูุฉ 24 ููุฌุงุจูุณู',
        'ุนุฏุณุฉ ูุงุจูุฉ ููุชุจุฏูู',
        'ุชุณุฌูู ููุฏูู 4K',
        'ุดุงุดุฉ LCD ูุงุจูุฉ ููุทู',
        'ููุงุด ูุฏูุฌ',
        'ุชุซุจูุช ุงูุตูุฑุฉ ุงูุจุตุฑู',
        'ุจุทุงุฑูุฉ ูุงุจูุฉ ููุดุญู',
        'ุญููุจุฉ ุญูุงูุฉ ูุฌุงููุฉ'
      ]
    },
    {
      name: 'ุทุงุจุนุฉ ููุฒุฑ ุณุฑูุนุฉ',
      slug: 'laser-printer',
      description: 'ุทุงุจุนุฉ ููุฒุฑ ุณุฑูุนุฉ ููุงุณุชุฎุฏุงู ุงูููุชุจู',
      price: 399,
      image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product6',
      categoryId: accessoriesCategory?.id,
      createdById: editor.id,
      features: [
        'ุณุฑุนุฉ ุทุจุงุนุฉ 30 ุตูุญุฉ ูู ุงูุฏูููุฉ',
        'ุฏูุฉ ุทุจุงุนุฉ 1200 ููุทุฉ ูู ุงูุจูุตุฉ',
        'ุทุจุงุนุฉ ูุงุณูููุฉ',
        'ุดุจูุฉ WiFi ูุฏูุฌุฉ',
        'ุดุงุดุฉ LCD ููููุฉ',
        'ุญุงููุฉ ูุฑู 250 ุตูุญุฉ',
        'ุทุจุงุนุฉ ูู ุงููุงุชู',
        'ุถูุงู ุณูุฉ ูุงููุฉ'
      ]
    },
    {
      name: 'ููุจุฑ ุตูุช ุจููุชูุซ',
      slug: 'bluetooth-speaker',
      description: 'ููุจุฑ ุตูุช ุจููุชูุซ ูุญููู ูุน ุตูุช ุนุงูู ุงูุฌูุฏุฉ',
      price: 199,
      image: 'https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product7',
      categoryId: accessoriesCategory?.id,
      createdById: editor.id,
      features: [
        'ููุฉ ุตูุช 40 ูุงุท',
        'ุฌูุฏุฉ ุตูุช ุนุงููุฉ',
        'ุงุชุตุงู ุจููุชูุซ 5.0',
        'ุจุทุงุฑูุฉ ุชุฏูู 20 ุณุงุนุฉ',
        'ููุงููุฉ ูููุงุก',
        'ุชุญูู ุจุงูููุณ',
        'ุฅุถุงุกุฉ LED ูุชุนุฏุฏุฉ ุงูุฃููุงู',
        'ุญููุจุฉ ุญูู ูุฌุงููุฉ'
      ]
    },
    {
      name: 'ุฌูุงุฒ ุชุงุจูุช ููุฑุณู',
      slug: 'drawing-tablet',
      description: 'ุฌูุงุฒ ุชุงุจูุช ุงุญุชุฑุงูู ููุฑุณู ุงูุฑููู',
      price: 799,
      image: 'https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product8',
      categoryId: accessoriesCategory?.id,
      createdById: editor.id,
      features: [
        'ุดุงุดุฉ 10.1 ุจูุตุฉ ุนุงููุฉ ุงูุฏูุฉ',
        'ููู ุฑููู ุฏููู',
        'ุถุบุท ุญุณุงุณ 4096 ูุณุชูู',
        'ุจุทุงุฑูุฉ ุชุฏูู 12 ุณุงุนุฉ',
        'ูุธุงู ุชุดุบูู Android',
        'ุชุทุจููุงุช ุฑุณู ูุชุนุฏุฏุฉ',
        'ุชุฎุฒูู 64 ุฌูุฌุงุจุงูุช',
        'ุดุญู ุณุฑูุน'
      ]
    },
    {
      name: 'ูุงุชู ุฐูู ุงูุชุตุงุฏู',
      slug: 'budget-smartphone',
      description: 'ูุงุชู ุฐูู ุงูุชุตุงุฏู ูุน ุฃุฏุงุก ููุชุงุฒ',
      price: 599,
      image: 'https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product9',
      categoryId: smartphonesCategory?.id,
      createdById: editor.id,
      features: [
        'ุดุงุดุฉ 6.1 ุจูุตุฉ ุนุงููุฉ ุงูุฏูุฉ',
        'ูุงููุฑุง ุฎูููุฉ ูุฒุฏูุฌุฉ 48 ููุฌุงุจูุณู',
        'ุจุทุงุฑูุฉ 4000 ูููู ุฃูุจูุฑ',
        'ูุนุงูุฌ Snapdragon 680',
        'ุฐุงูุฑุฉ ุชุฎุฒูู 128 ุฌูุฌุงุจุงูุช',
        'ุฏุนู ุดุจูุงุช 4G',
        'ุดุญู ุณุฑูุน 18 ูุงุท',
        'ูุธุงู ุชุดุบูู Android 12'
      ]
    },
    {
      name: 'ูุงุจุชูุจ ููุทูุงุจ',
      slug: 'student-laptop',
      description: 'ูุงุจุชูุจ ูุซุงูู ููุทูุงุจ ูุน ุฃุฏุงุก ูุชูุงุฒู',
      price: 899,
      image: 'https://images.unsplash.com/photo-1525547719571-a2d4ac8945e2?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product10',
      categoryId: laptopsCategory?.id,
      createdById: editor.id,
      features: [
        'ูุนุงูุฌ Intel Core i5 ุงูุฌูู 11',
        'ุฐุงูุฑุฉ RAM 8 ุฌูุฌุงุจุงูุช',
        'ูุฑุต ุตูุจ SSD 256 ุฌูุฌุงุจุงูุช',
        'ุดุงุดุฉ 14 ุจูุตุฉ ุนุงููุฉ ุงูุฏูุฉ',
        'ุจุทุงุฑูุฉ ุชุฏูู 10 ุณุงุนุงุช',
        'ูุธุงู ุชุดุบูู Windows 11',
        'ูุฒู ุฎููู 1.4 ูุฌู',
        'ุถูุงู ุณูุฉ ูุงููุฉ'
      ]
    },
    {
      name: 'ูุงููุฑุง ุฃูุดู ุฑูุงุถูุฉ',
      slug: 'action-camera',
      description: 'ูุงููุฑุง ุฃูุดู ุฑูุงุถูุฉ ููุงููุฉ ูููุงุก ูุงูุตุฏูุงุช',
      price: 349,
      image: 'https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product11',
      categoryId: camerasCategory?.id,
      createdById: editor.id,
      features: [
        'ุชุณุฌูู ููุฏูู 4K 30fps',
        'ููุงููุฉ ูููุงุก ุญุชู 30 ูุชุฑ',
        'ููุงููุฉ ููุตุฏูุงุช',
        'ุดุงุดุฉ LCD 2 ุจูุตุฉ',
        'ุจุทุงุฑูุฉ ูุงุจูุฉ ููุดุญู',
        'WiFi ูุฏูุฌ',
        'ุนุฏุณุฉ ูุงุณุนุฉ ุงูุฒุงููุฉ',
        'ุญุงูู ุซูุงุซู ูุฌุงูู'
      ]
    },
    {
      name: 'ุณูุงุนุงุช ุฃุฐู ุฑูุงุถูุฉ',
      slug: 'sport-earbuds',
      description: 'ุณูุงุนุงุช ุฃุฐู ุฑูุงุถูุฉ ููุงููุฉ ูููุงุก ูุงูุนุฑู',
      price: 149,
      image: 'https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?w=400&h=300&fit=crop',
      externalLink: 'https://example.com/product12',
      categoryId: accessoriesCategory?.id,
      createdById: editor.id,
      features: [
        'ููุงููุฉ ูููุงุก ูุงูุนุฑู IPX7',
        'ุจุทุงุฑูุฉ ุชุฏูู 8 ุณุงุนุงุช',
        'ุดุญู ุณุฑูุน ุฎูุงู 15 ุฏูููุฉ',
        'ุงุชุตุงู ุจููุชูุซ 5.0',
        'ุชุญูู ุจุงูููุณ',
        'ุญููุจุฉ ุดุญู ูุญูููุฉ',
        'ุฃุญุฌุงู ูุฎุชููุฉ ููุฃุฐู',
        'ุถูุงู ุณูุฉ ูุงููุฉ'
      ]
    }
  ];

  for (const productData of sampleProducts) {
    const product = await prisma.product.upsert({
      where: { slug: productData.slug },
      update: {},
      create: productData
    });
    console.log('โ Product created:', product.name);
  }

  // Create site settings
  const siteSettings = [
    { key: 'site_title', value: 'ูุชุฌุฑ ุงูุนูููุฉ - ุชุณูู ุจุฐูุงุก', type: 'string' },
    { key: 'site_description', value: 'ูููุน ุงูุจูุน ุจุงูุนูููุฉ - ูุฑูุฌ ููุชุฌุงุช ุงูุชุฌุงุฑ ููุงุจู ุนูููุฉ ูู ูู ุนูููุฉ ุจูุน', type: 'string' },
    { key: 'site_keywords', value: 'ูุชุฌุฑ, ุนูููุฉ, ุชุณูู, ุฅููุชุฑูููุงุช, ููุงุชู, ุฅูุณุณูุงุฑุงุช', type: 'string' },
    { key: 'commission_rate', value: '10', type: 'number' },
    { key: 'contact_email', value: 'info@commission-store.com', type: 'string' },
    { key: 'contact_phone', value: '+966 50 123 4567', type: 'string' }
  ];

  for (const setting of siteSettings) {
    await prisma.siteSettings.upsert({
      where: { key: setting.key },
      update: {},
      create: setting
    });
  }
  console.log('โ Site settings created');

  console.log('๐ Database seeding completed!');
}

main()
  .catch((e) => {
    console.error('โ Error during seeding:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  }); 